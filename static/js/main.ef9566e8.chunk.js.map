{"version":3,"sources":["components/StateMap.jsx","../../fhir-visualizers/build/index.js","syntheticmass_api.js","components/PatientViewer.jsx","components/PatientList.jsx","App.js","serviceWorker.js","index.js"],"names":["StateMap","props","history","useHistory","Map","center","zoom","style","height","width","TileLayer","attribution","url","GeoJSON","data","ma_geo","key","onEachFeature","feature","layer","cityName","properties","cs_name","bindTooltip","on","click","e","push","f","color","opacity","fillOpacity","fillColor","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","css","ref","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styleInject","FORMATTERS","date","str","format","time","dateTime","numberWithCommas","toString","replace","SPACER","title","versions","getter","obsValue","entry","valueQuantity","num","digits","Number","parseFloat","toFixed","code","valueCodeableConcept","coding","display","valueString","component","v1","v2","s1","s2","_React$Component","PatientVisualizer","_super","this","apply","arguments","patient","extension","race","raceExt","find","valueCoding","ethnicity","ethExt","language","communication","searchableObs","observations","slice","reverse","height_obs","o","weight_obs","address","geolocation","length","valueDecimal","className","id","name","family","given","join","gender","birthDate","line","city","state","postalCode","deceasedDateTime","Fragment","Component","_React$Component2","GenericVisualizer","_super2","_this","columns","filter","c","includes","version","map","scope","_this2","nestedRows","_step","_iterator","s","n","done","nestedRow","subRowLines","undefined","_step2","subColumns","_iterator2","_loop","subRowLine","keyFn","i","result","formatter","defaultValue","err","rowClass","_this3","concat","renderHeaderLine","rows","renderBodyLine","_GenericVisualizer","ConditionsVisualizer","_super3","onsetDateTime","abatementDateTime","_GenericVisualizer2","ObservationsVisualizer","_super4","effectiveDateTime","_GenericVisualizer3","ReportsVisualizer","_super5","rpt","presentedForm","p","Math","floor","random","atob","r","_GenericVisualizer4","MedicationsVisualizer","_super6","medicationCodeableConcept","authoredOn","status","_GenericVisualizer5","AllergiesVisualizer","_super7","recordedDate","assertedDate","_GenericVisualizer6","CarePlansVisualizer","_super8","category","period","start","cp","goals","g","goal","description","text","activity","a","detail","_GenericVisualizer7","ProceduresVisualizer","_super9","performedPeriod","_GenericVisualizer8","EncountersVisualizer","_super10","end","duration","diff","humanize","_GenericVisualizer9","ImmunizationsVisualizer","_super11","vaccineCode","occurrenceDateTime","_GenericVisualizer10","DocumentReferencesVisualizer","_super12","d","content","attachment","dr","API_KEY","process","fetchJson","fetch","then","response","json","getBundle","priorResults","total","link","next","l","relation","nextUrl","isMatchingReference","reference","resourceType","PatientViewer","setLoading","callback","useParams","useState","bundle","setBundle","isLoading","setIsLoading","useEffect","getPatientById","patientEverythingBundle","onDrop","files","reader","FileReader","readAsText","onload","JSON","parse","getRootProps","getInputProps","background","src","alt","allResources","resource","getByType","conditions","medications","reports","forEach","res","careplans","cpg","procedures","encounters","allergies","immunizations","documents","PatientList","patients","setPatients","count","getPatientsByCity","searchResultBundle","to","renderPatients","App","path","React","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ef9566e8.chunk.js","sourcesContent":["import React from 'react';\nimport { Map, TileLayer, GeoJSON } from 'react-leaflet';\nimport { useHistory } from \"react-router-dom\";\n\nimport ma_geo from '../ma_geo.json';\n\nconst StateMap = (props) => {\n  const history = useHistory();\n  const onEachFeature = function(feature, layer) {\n    const props = feature.properties;\n    const cityName = props.cs_name;\n    layer.bindTooltip(`<b>${cityName}</b>`);\n    layer.on({\n        click: (e) =>  history.push(`/city/${cityName}`)\n    });\n  }\n\n  const position = [42, -71.7];\n\n  return (\n    <Map center={position} zoom={8} style={{ height: '500px', width: '800px' }}>\n      <TileLayer\n        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n        <GeoJSON \n          data={ma_geo}\n          key={'changeme'} // set a key to ensure the geojson gets re-rendered correctly when we switch values\n          onEachFeature={onEachFeature} \n          style={(f) => ({ color: '#ffffff', opacity: 0.8, fillOpacity: 0.75, fillColor: '#7f7fff' })}\n          />\n    </Map>\n  )\n};\n\nexport default StateMap;","import _createForOfIteratorHelper from \"/Users/dehall/spt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"/Users/dehall/spt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dehall/spt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/dehall/spt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/dehall/spt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport moment from 'moment';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".health-record__header {\\n  font-family: 'Open Sans', sans-serif;\\n  display: -ms-flexbox;\\n  display: flex;\\n  color: #6b8eb6;\\n  font-size: 1em;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  margin: 40px 0;\\n}\\n​\\n.health-record__header .header-divider {\\n  width: 100%;\\n  border-bottom: 1px solid #7e90a3;\\n  margin-bottom: 10px;\\n}\\n​\\n.report-line {\\n  background: #EAEAEA;\\n}\\n\\n.display-linebreak {\\n  white-space: pre-line;\\n}\\n​\\ndl {\\n  margin-top:0;\\n  margin-bottom:20px\\n}\\n\\ndd,dt {\\n  line-height:1.42857\\n}\\n\\ndt {\\n  font-weight:700\\n}\\n\\ndd {\\n  margin-left:0\\n}\\n.dl-horizontal dd:after,.dl-horizontal dd:before {\\n  content:\\\" \\\";\\n  display:table\\n}\\n\\n.dl-horizontal dd:after {\\n  clear:both\\n}\\n\\n@media (min-width:768px) {\\n  .dl-horizontal dt {\\n    float:left;\\n    clear:left;\\n    text-align:right;\\n    overflow:hidden;\\n    text-overflow:ellipsis;\\n    white-space:nowrap\\n  }\\n  .dl-horizontal dd {\\n    margin-left:180px\\n  }\\n}\\n\";\nstyleInject(css_248z);\nvar DSTU2 = '1.0.2';\nvar STU3 = '3.0.1';\nvar R4 = '4.0.0';\n\nvar round = function round(num, digits) {\n  return Number.parseFloat(num).toFixed(digits);\n};\n\nvar FORMATTERS = {\n  date: function date(str) {\n    return moment(str).format('YYYY-MM-DD');\n  },\n  time: function time(str) {\n    return moment(str).format('HH:mm:ss');\n  },\n  dateTime: function dateTime(str) {\n    return moment(str).format('YYYY-MM-DD - h:mm:ss a');\n  },\n  numberWithCommas: function numberWithCommas(str) {\n    return str.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  } // pre: (str) => (<pre>{str}</pre>)\n\n};\nvar SPACER = {\n  title: '',\n  versions: '*',\n  getter: function getter() {\n    return '';\n  }\n};\n\nvar obsValue = function obsValue(entry) {\n  if (entry == null) {\n    return '';\n  } else if (entry.valueQuantity) {\n    return round(entry.valueQuantity.value, 2) + ' ' + entry.valueQuantity.code;\n  } else if (entry.valueCodeableConcept) {\n    return entry.valueCodeableConcept.coding[0].display;\n  } else if (entry.valueString) {\n    return entry.valueString;\n  }\n\n  if (entry.code.coding[0].display === \"Blood Pressure\") {\n    if (!entry.component[0].valueQuantity) {\n      return ''; // WTF!!\n    }\n\n    var v1 = Number.parseFloat(entry.component[0].valueQuantity.value);\n    var v2 = Number.parseFloat(entry.component[1].valueQuantity.value);\n    var s1 = v1.toFixed(0);\n    var s2 = v2.toFixed(0);\n\n    if (v1 > v2) {\n      return s1 + ' / ' + s2 + ' mmHg';\n    } else {\n      return s2 + ' / ' + s1 + ' mmHg';\n    }\n  }\n\n  return '';\n};\n\nvar duration = function duration(period) {\n  if (!period.end) {\n    return '';\n  }\n\n  var start = moment(period.start);\n  var end = moment(period.end);\n  return moment.duration(start.diff(end)).humanize();\n};\n\nvar PatientVisualizer = /*#__PURE__*/function (_React$Component) {\n  _inherits(PatientVisualizer, _React$Component);\n\n  var _super = _createSuper(PatientVisualizer);\n\n  function PatientVisualizer() {\n    _classCallCheck(this, PatientVisualizer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PatientVisualizer, [{\n    key: \"render\",\n    value: function render() {\n      var patient = this.props.patient;\n      patient.extension = patient.extension || [];\n      var raceExt = patient.extension.find(function (e) {\n        return e.url === 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-race';\n      });\n      var race;\n\n      if (raceExt) {\n        race = raceExt.extension[0].valueString || raceExt.extension[0].valueCoding.display;\n      } else {\n        race = null;\n      }\n\n      var ethExt = patient.extension.find(function (e) {\n        return e.url === 'http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity';\n      });\n      var ethnicity;\n\n      if (ethExt) {\n        ethnicity = ethExt.extension[0].valueString || ethExt.extension[0].valueCoding.display;\n      } else {\n        ethnicity = null;\n      }\n\n      var language = null;\n\n      if (patient.communication && patient.communication[0] && patient.communication[0].language && patient.communication[0].language.coding && patient.communication[0].language.coding[0]) {\n        language = patient.communication[0].language.coding[0].display;\n      }\n\n      var observations = this.props.observations || [];\n      var searchableObs = observations.slice().reverse();\n      var height_obs = searchableObs.find(function (o) {\n        return o.code.coding[0].display === 'Body Height';\n      });\n      var weight_obs = searchableObs.find(function (o) {\n        return o.code.coding[0].display === 'Body Weight';\n      });\n      var cause_of_death_obs = null;\n      var lat, lng;\n\n      if (patient.address[0].extension) {\n        var geolocation = patient.address[0].extension.find(function (e) {\n          return e.url === 'http://hl7.org/fhir/StructureDefinition/geolocation';\n        });\n\n        if (geolocation && geolocation.extension.length > 1) {\n          lat = geolocation.extension.find(function (e) {\n            return e.url === 'latitude';\n          }).valueDecimal;\n          lng = geolocation.extension.find(function (e) {\n            return e.url === 'longitude';\n          }).valueDecimal;\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"health-record__header\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header-title\"\n      }, \"Patient\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header-divider\"\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"p_brief\",\n        className: \"row\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"p_brief_records\",\n        className: \"col-6\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"p_brief_name_address\",\n        className: \"p_block\"\n      }, /*#__PURE__*/React.createElement(\"dl\", {\n        className: \"dl-horizontal p_brief_family\"\n      }, /*#__PURE__*/React.createElement(\"dt\", null, \"Name\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.name[0].family, \", \", patient.name[0].given.join(' ')), /*#__PURE__*/React.createElement(\"dt\", null, \"Gender\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.gender), /*#__PURE__*/React.createElement(\"dt\", null, \"Date of Birth\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.birthDate), /*#__PURE__*/React.createElement(\"dt\", null, \"Address\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.address[0].line.join(' ')), /*#__PURE__*/React.createElement(\"dt\", null, \"City, State\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.address[0].city, \", \", patient.address[0].state), /*#__PURE__*/React.createElement(\"dt\", null, \"Postal Code\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.address[0].postalCode), patient.deceasedDateTime && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"dt\", null, \"Date of Death\"), /*#__PURE__*/React.createElement(\"dd\", null, patient.deceasedDateTime))))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"p_brief_records\",\n        className: \"col-6\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"p_brief_name_address\",\n        className: \"p_block\"\n      }, /*#__PURE__*/React.createElement(\"dl\", {\n        className: \"dl-horizontal p_brief_family\"\n      }, /*#__PURE__*/React.createElement(\"dt\", null, \"Height\"), /*#__PURE__*/React.createElement(\"dd\", null, obsValue(height_obs)), /*#__PURE__*/React.createElement(\"dt\", null, \"Weight\"), /*#__PURE__*/React.createElement(\"dd\", null, obsValue(weight_obs)), /*#__PURE__*/React.createElement(\"dt\", null, \"Race\"), /*#__PURE__*/React.createElement(\"dd\", null, race || 'unk.'), /*#__PURE__*/React.createElement(\"dt\", null, \"Ethnicity\"), /*#__PURE__*/React.createElement(\"dd\", null, ethnicity || 'unk.'), /*#__PURE__*/React.createElement(\"dt\", null, \"Language\"), /*#__PURE__*/React.createElement(\"dd\", null, language || 'unk.'), /*#__PURE__*/React.createElement(\"dt\", null, \"Blood Type\"), /*#__PURE__*/React.createElement(\"dd\", null, \"unknown\"), patient.deceasedDateTime && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"dt\", null, \"Cause of Death\"), /*#__PURE__*/React.createElement(\"dd\", null, cause_of_death_obs)))))));\n    }\n  }]);\n\n  return PatientVisualizer;\n}(React.Component);\n\nvar GenericVisualizer = /*#__PURE__*/function (_React$Component2) {\n  _inherits(GenericVisualizer, _React$Component2);\n\n  var _super2 = _createSuper(GenericVisualizer);\n\n  function GenericVisualizer() {\n    _classCallCheck(this, GenericVisualizer);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(GenericVisualizer, [{\n    key: \"renderHeaderLine\",\n\n    /*\n      columns: [\n        { title: 'SNOMED', getter: (c) => c.code.coding[0].code, versions: ['1.0.2', '3.0.1', '4.0.0'] }\n      ],\n      rows: // fhir[]\n      keyFn: (c) => c.id\n    */\n    value: function renderHeaderLine() {\n      var _this = this;\n\n      var columns = this.props.columns.filter(function (c) {\n        return c.versions === '*' || c.versions.includes(_this.props.version);\n      }).map(function (c) {\n        return c.title;\n      });\n      return columns.map(function (c) {\n        return /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"col\",\n          key: c\n        }, c);\n      });\n    }\n  }, {\n    key: \"renderBodyLine\",\n    value: function renderBodyLine(line) {\n      var _this2 = this;\n\n      var columns = this.props.columns.filter(function (c) {\n        return c.versions === '*' || c.versions.includes(_this2.props.version);\n      });\n      var nestedRows = [];\n\n      if (this.props.nestedRows) {\n        var _iterator = _createForOfIteratorHelper(this.props.nestedRows),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var nestedRow = _step.value;\n            var subRowLines = void 0;\n\n            try {\n              subRowLines = nestedRow.getter(line);\n            } catch (e) {\n              subRowLines = undefined;\n            }\n\n            if (!subRowLines) continue;\n            var subColumns = nestedRow.columns.filter(function (c) {\n              return c.versions === '*' || c.versions.includes(_this2.props.version);\n            });\n\n            var _iterator2 = _createForOfIteratorHelper(subRowLines),\n                _step2;\n\n            try {\n              var _loop = function _loop() {\n                var subRowLine = _step2.value;\n                nestedRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n                  key: nestedRow.keyFn(subRowLine)\n                }, subColumns.map(function (c, i) {\n                  var formatter = FORMATTERS[c.format];\n                  var result;\n\n                  try {\n                    result = c.getter(subRowLine);\n                  } catch (e) {\n                    result = undefined;\n                  }\n\n                  if (result && formatter) {\n                    result = formatter(result);\n                  }\n\n                  if (!result && c.defaultValue) {\n                    result = c.defaultValue;\n                  }\n\n                  return /*#__PURE__*/React.createElement(\"td\", {\n                    key: i\n                  }, /*#__PURE__*/React.createElement(\"div\", {\n                    className: \"display-linebreak\"\n                  }, result));\n                })));\n              };\n\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                _loop();\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: this.props.keyFn(line)\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        className: this.props.rowClass || '',\n        key: this.props.keyFn(line)\n      }, columns.map(function (c, i) {\n        var formatter = FORMATTERS[c.format];\n        var result;\n\n        try {\n          result = c.getter(line);\n        } catch (e) {\n          result = undefined;\n        }\n\n        if (result && formatter) {\n          result = formatter(result);\n        }\n\n        if (!result && c.defaultValue) {\n          result = c.defaultValue;\n        }\n\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: i\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"display-linebreak\"\n        }, result));\n      })), nestedRows); // TODO: multi-liners\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: this.props.title\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"health-record__header\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header-title\"\n      }, this.props.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"header-divider\"\n      })), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-sm table-hover\"\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        id: \"p_\".concat(this.props.title, \"_head\")\n      }, /*#__PURE__*/React.createElement(\"tr\", null, this.renderHeaderLine())), /*#__PURE__*/React.createElement(\"tbody\", {\n        id: \"p_\".concat(this.props.title, \"_list\")\n      }, this.props.rows && this.props.rows.slice().reverse().map(function (c) {\n        return _this3.renderBodyLine(c);\n      }))));\n    }\n  }]);\n\n  return GenericVisualizer;\n}(React.Component);\n\nvar ConditionsVisualizer = /*#__PURE__*/function (_GenericVisualizer) {\n  _inherits(ConditionsVisualizer, _GenericVisualizer);\n\n  var _super3 = _createSuper(ConditionsVisualizer);\n\n  function ConditionsVisualizer() {\n    _classCallCheck(this, ConditionsVisualizer);\n\n    return _super3.apply(this, arguments);\n  }\n\n  return ConditionsVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(ConditionsVisualizer, \"defaultProps\", {\n  title: 'Conditions',\n  columns: [{\n    title: 'SNOMED',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].code;\n    }\n  }, {\n    title: 'Condition',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].display;\n    }\n  }, {\n    title: 'Date of Onset',\n    versions: '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.onsetDateTime;\n    }\n  }, {\n    title: 'Date Resolved',\n    'versions': '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.abatementDateTime;\n    },\n    defaultValue: 'N/A'\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar ObservationsVisualizer = /*#__PURE__*/function (_GenericVisualizer2) {\n  _inherits(ObservationsVisualizer, _GenericVisualizer2);\n\n  var _super4 = _createSuper(ObservationsVisualizer);\n\n  function ObservationsVisualizer() {\n    _classCallCheck(this, ObservationsVisualizer);\n\n    return _super4.apply(this, arguments);\n  }\n\n  return ObservationsVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(ObservationsVisualizer, \"defaultProps\", {\n  title: 'Observations',\n  columns: [{\n    title: 'LOINC',\n    versions: '*',\n    getter: function getter(o) {\n      return o.code.coding[0].code;\n    }\n  }, {\n    title: 'Observation',\n    versions: '*',\n    getter: function getter(o) {\n      return o.code.coding[0].display;\n    }\n  }, {\n    title: 'Value',\n    versions: '*',\n    getter: function getter(o) {\n      return obsValue(o);\n    }\n  }, {\n    title: 'Date Recorded',\n    'versions': '*',\n    format: 'date',\n    getter: function getter(o) {\n      return o.effectiveDateTime;\n    }\n  }],\n  keyFn: function keyFn(o) {\n    return o.id;\n  }\n});\n\nvar ReportsVisualizer = /*#__PURE__*/function (_GenericVisualizer3) {\n  _inherits(ReportsVisualizer, _GenericVisualizer3);\n\n  var _super5 = _createSuper(ReportsVisualizer);\n\n  function ReportsVisualizer() {\n    _classCallCheck(this, ReportsVisualizer);\n\n    return _super5.apply(this, arguments);\n  }\n\n  return ReportsVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(ReportsVisualizer, \"defaultProps\", {\n  title: 'Reports',\n  columns: [{\n    title: 'LOINC',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].code;\n    }\n  }, {\n    title: 'Report/Observation',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].display;\n    }\n  }, {\n    title: 'Value',\n    versions: '*',\n    getter: function getter() {\n      return '';\n    }\n  }, {\n    title: 'Date',\n    'versions': '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.effectiveDateTime;\n    },\n    defaultValue: 'N/A'\n  }],\n  rowClass: 'report-line',\n  nestedRows: [{\n    getter: function getter(rpt) {\n      return rpt.observations;\n    },\n    keyFn: function keyFn(o) {\n      return o.id;\n    },\n    columns: [{\n      title: 'LOINC',\n      versions: '*',\n      getter: function getter(o) {\n        return o.code.coding[0].code;\n      }\n    }, {\n      title: 'Report/Observation',\n      versions: '*',\n      getter: function getter(o) {\n        return o.code.coding[0].display;\n      }\n    }, {\n      title: 'Value',\n      versions: '*',\n      getter: function getter(o) {\n        return obsValue(o);\n      }\n    }, SPACER]\n  }, {\n    getter: function getter(rpt) {\n      return rpt.presentedForm;\n    },\n    keyFn: function keyFn(p) {\n      return Math.floor(Math.random() * 100);\n    },\n    // TODO, pass in index\n    columns: [SPACER, {\n      title: 'Content',\n      versions: '*',\n      format: 'pre',\n      getter: function getter(p) {\n        return atob(p.data);\n      }\n    }, SPACER, SPACER]\n  }],\n  keyFn: function keyFn(r) {\n    return r.id;\n  }\n});\n\nvar MedicationsVisualizer = /*#__PURE__*/function (_GenericVisualizer4) {\n  _inherits(MedicationsVisualizer, _GenericVisualizer4);\n\n  var _super6 = _createSuper(MedicationsVisualizer);\n\n  function MedicationsVisualizer() {\n    _classCallCheck(this, MedicationsVisualizer);\n\n    return _super6.apply(this, arguments);\n  }\n\n  return MedicationsVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(MedicationsVisualizer, \"defaultProps\", {\n  title: 'Medications',\n  columns: [{\n    title: 'RxNorm',\n    versions: '*',\n    getter: function getter(c) {\n      return c.medicationCodeableConcept.coding[0].code;\n    }\n  }, {\n    title: 'Medication',\n    versions: '*',\n    getter: function getter(c) {\n      return c.medicationCodeableConcept.coding[0].display;\n    }\n  }, {\n    title: 'Date Prescribed',\n    versions: '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.authoredOn;\n    }\n  }, {\n    title: 'Status',\n    'versions': '*',\n    getter: function getter(c) {\n      return c.status;\n    }\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar AllergiesVisualizer = /*#__PURE__*/function (_GenericVisualizer5) {\n  _inherits(AllergiesVisualizer, _GenericVisualizer5);\n\n  var _super7 = _createSuper(AllergiesVisualizer);\n\n  function AllergiesVisualizer() {\n    _classCallCheck(this, AllergiesVisualizer);\n\n    return _super7.apply(this, arguments);\n  }\n\n  return AllergiesVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(AllergiesVisualizer, \"defaultProps\", {\n  title: 'Allergies',\n  columns: [{\n    title: 'SNOMED',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].code;\n    }\n  }, {\n    title: 'Allergy',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].display;\n    }\n  }, {\n    title: 'Date Recorded',\n    versions: [R4],\n    getter: function getter(c) {\n      return c.recordedDate;\n    }\n  }, {\n    title: 'Date Recorded',\n    versions: [DSTU2, STU3],\n    format: 'date',\n    getter: function getter(c) {\n      return c.assertedDate;\n    }\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar goalDescriptionDSTU2 = function goalDescriptionDSTU2(goal) {\n  if (goal.description) return goal.description;\n  return '';\n};\n\nvar goalDescriptionSTU3R4 = function goalDescriptionSTU3R4(goal) {\n  if (goal.description) return goal.description.text;\n  return '';\n};\n\nvar CarePlansVisualizer = /*#__PURE__*/function (_GenericVisualizer6) {\n  _inherits(CarePlansVisualizer, _GenericVisualizer6);\n\n  var _super8 = _createSuper(CarePlansVisualizer);\n\n  function CarePlansVisualizer() {\n    _classCallCheck(this, CarePlansVisualizer);\n\n    return _super8.apply(this, arguments);\n  }\n\n  return CarePlansVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(CarePlansVisualizer, \"defaultProps\", {\n  title: 'CarePlans',\n  columns: [{\n    title: 'SNOMED',\n    versions: '*',\n    getter: function getter(c) {\n      return c.category[0].coding[0].code;\n    }\n  }, {\n    title: 'Care Plan',\n    versions: '*',\n    getter: function getter(c) {\n      return c.category[0].coding[0].display;\n    }\n  }, {\n    title: 'Date',\n    versions: '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.period.start;\n    }\n  }],\n  nestedRows: [{\n    getter: function getter(cp) {\n      return cp.goals;\n    },\n    keyFn: function keyFn(g) {\n      return g.id;\n    },\n    columns: [SPACER, {\n      title: 'Goal',\n      versions: [DSTU2],\n      getter: function getter(g) {\n        return \"Goal: \".concat(goalDescriptionDSTU2(g));\n      }\n    }, {\n      title: 'Goal',\n      versions: [STU3, R4],\n      getter: function getter(g) {\n        return \"Goal: \".concat(goalDescriptionSTU3R4(g));\n      }\n    }, SPACER]\n  }, {\n    getter: function getter(cp) {\n      return cp.activity;\n    },\n    keyFn: function keyFn(a) {\n      return Math.random();\n    },\n    columns: [SPACER, {\n      title: 'Activity',\n      versions: '*',\n      getter: function getter(a) {\n        return \"Activity: \".concat(a.detail.code.coding[0].display);\n      }\n    }, SPACER]\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar ProceduresVisualizer = /*#__PURE__*/function (_GenericVisualizer7) {\n  _inherits(ProceduresVisualizer, _GenericVisualizer7);\n\n  var _super9 = _createSuper(ProceduresVisualizer);\n\n  function ProceduresVisualizer() {\n    _classCallCheck(this, ProceduresVisualizer);\n\n    return _super9.apply(this, arguments);\n  }\n\n  return ProceduresVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(ProceduresVisualizer, \"defaultProps\", {\n  title: 'Procedures',\n  columns: [{\n    title: 'SNOMED',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].code;\n    }\n  }, {\n    title: 'Procedure',\n    versions: '*',\n    getter: function getter(c) {\n      return c.code.coding[0].display;\n    }\n  }, {\n    title: 'Date Performed',\n    versions: '*',\n    format: 'dateTime',\n    getter: function getter(c) {\n      return c.performedPeriod.start;\n    }\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar EncountersVisualizer = /*#__PURE__*/function (_GenericVisualizer8) {\n  _inherits(EncountersVisualizer, _GenericVisualizer8);\n\n  var _super10 = _createSuper(EncountersVisualizer);\n\n  function EncountersVisualizer() {\n    _classCallCheck(this, EncountersVisualizer);\n\n    return _super10.apply(this, arguments);\n  }\n\n  return EncountersVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(EncountersVisualizer, \"defaultProps\", {\n  title: 'Encounters',\n  columns: [{\n    title: 'SNOMED',\n    versions: '*',\n    getter: function getter(e) {\n      return e.type[0].coding[0].code;\n    }\n  }, {\n    title: 'Encounter',\n    versions: '*',\n    getter: function getter(e) {\n      return e.type[0].coding[0].display;\n    }\n  }, {\n    title: 'Start Time',\n    versions: '*',\n    format: 'dateTime',\n    getter: function getter(e) {\n      return e.period.start;\n    }\n  }, {\n    title: 'Duration',\n    'versions': '*',\n    getter: function getter(e) {\n      return duration(e.period);\n    }\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar ImmunizationsVisualizer = /*#__PURE__*/function (_GenericVisualizer9) {\n  _inherits(ImmunizationsVisualizer, _GenericVisualizer9);\n\n  var _super11 = _createSuper(ImmunizationsVisualizer);\n\n  function ImmunizationsVisualizer() {\n    _classCallCheck(this, ImmunizationsVisualizer);\n\n    return _super11.apply(this, arguments);\n  }\n\n  return ImmunizationsVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(ImmunizationsVisualizer, \"defaultProps\", {\n  title: 'Vaccinations',\n  columns: [{\n    title: 'CVX',\n    versions: '*',\n    getter: function getter(c) {\n      return c.vaccineCode.coding[0].code;\n    }\n  }, {\n    title: 'Vaccine',\n    versions: '*',\n    getter: function getter(c) {\n      return c.vaccineCode.coding[0].display;\n    }\n  }, {\n    title: 'Date Given',\n    versions: '*',\n    format: 'date',\n    getter: function getter(c) {\n      return c.occurrenceDateTime;\n    }\n  }],\n  keyFn: function keyFn(c) {\n    return c.id;\n  }\n});\n\nvar DocumentReferencesVisualizer = /*#__PURE__*/function (_GenericVisualizer10) {\n  _inherits(DocumentReferencesVisualizer, _GenericVisualizer10);\n\n  var _super12 = _createSuper(DocumentReferencesVisualizer);\n\n  function DocumentReferencesVisualizer() {\n    _classCallCheck(this, DocumentReferencesVisualizer);\n\n    return _super12.apply(this, arguments);\n  }\n\n  return DocumentReferencesVisualizer;\n}(GenericVisualizer);\n\n_defineProperty(DocumentReferencesVisualizer, \"defaultProps\", {\n  title: 'Documents',\n  columns: [{\n    title: 'Date',\n    versions: '*',\n    format: 'date',\n    getter: function getter(d) {\n      return d.date;\n    }\n  }, {\n    title: 'Content',\n    versions: '*',\n    format: 'pre',\n    getter: function getter(d) {\n      return atob(d.content[0].attachment.data);\n    }\n  }],\n  keyFn: function keyFn(dr) {\n    return dr.id;\n  }\n});\n\nexport { AllergiesVisualizer, CarePlansVisualizer, ConditionsVisualizer, DocumentReferencesVisualizer, EncountersVisualizer, ImmunizationsVisualizer, MedicationsVisualizer, ObservationsVisualizer, PatientVisualizer, ProceduresVisualizer, ReportsVisualizer };","export const API_KEY = process.env.REACT_APP_API_KEY;\n\nconst fetchJson = url => fetch(url).then(response => response.json());\n\nexport const getPatientsByCity = (city, count=10) => {\n  const url = `https://syntheticmass.mitre.org/v1/fhir/Patient?address-city:exact=${city}&_count=${count}&apikey=${API_KEY}`;\n  return fetchJson(url);\n};\n\nexport const getPatientById = (id) => {\n  const url = `https://syntheticmass.mitre.org/v1/fhir/Patient/${id}/$everything?apikey=${API_KEY}`;\n  return getBundle(url);\n};\n\nconst getBundle = (url, priorResults) => {\n  return fetchJson(url)\n    .then(result => {\n      if (priorResults) {\n        result.entry.push(...priorResults.entry);\n        result.total = result.entry.length;\n      }\n\n      if (!result.link) return result;\n\n      const next = result.link.find(l => l.relation === 'next');\n      if (!next || !next.url) return result;\n\n      const nextUrl = `${next.url}&apikey=${API_KEY}`;\n      return getBundle(nextUrl, result);\n    });\n};\n\n\n// TODO: untested\nexport const getNext = (searchResultBundle) => {\n  if (!searchResultBundle.link) return null;\n  const next = searchResultBundle.link.find(l => l.relation === 'next');\n  if (!next) return null;\n  const url = `${next.url}&apikey=${API_KEY}`\n  return fetchJson(url);\n}\n","import React, { useState, useEffect } from 'react';\nimport { \n  PatientVisualizer,\n  ConditionsVisualizer,\n  ObservationsVisualizer,\n  ReportsVisualizer,\n  MedicationsVisualizer,\n  AllergiesVisualizer,\n  CarePlansVisualizer,\n  ProceduresVisualizer,\n  EncountersVisualizer,\n  ImmunizationsVisualizer,\n  DocumentReferencesVisualizer\n} from 'fhir-visualizers';\nimport { useParams } from \"react-router-dom\";\n\nimport Dropzone from 'react-dropzone'\n\nimport { getPatientById } from '../syntheticmass_api';\n\nconst isMatchingReference = (entry, reference, resourceType) => {\n  return entry.id === reference\n    || ('urn:uuid:'+entry.id) === reference\n    || (resourceType+'/'+entry.id) === reference;\n}\n\nconst getDropzone = (setLoading, callback) => {\n  const onDrop = files => {\n      const reader = new FileReader();\n      reader.readAsText(files[0]);\n      setLoading(true);\n      reader.onload = () => {\n        if (reader.result) {\n          const json = JSON.parse(reader.result);\n          setLoading(false);\n          callback(json);\n        }\n      };\n    };\n\n  return  (\n    <Dropzone onDrop={onDrop}>\n      {({getRootProps, getInputProps}) => (\n        <section>\n          <div {...getRootProps(\n            { style: { height: '100vh', width: '100%', background: '#F0F8FF' } }\n            )}>\n            <input {...getInputProps()} />\n            <p>Drag n drop a FHIR JSON file here, or click to select a file</p>\n          </div>\n        </section>\n      )}\n    </Dropzone>\n    );\n}\n\nconst PatientViewer = (props) => {\n  const { id } = useParams();\n\n  const [bundle, setBundle] = useState();\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (id) {\n      setIsLoading(true);\n      getPatientById(id)\n      .then(patientEverythingBundle => {\n        setBundle(patientEverythingBundle);\n        setIsLoading(false);\n      });\n    }\n  }, [id]);  \n\n  if (!id && !bundle) return getDropzone(setIsLoading, setBundle);\n\n  if (isLoading) return <img src=\"https://i.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.webp\" alt=\"loading...\" />;\n\n\n\n  const allResources = bundle.entry.map(e => e.resource);\n  const patient = allResources.find(r => r.resourceType === 'Patient');\n\n  const getByType = (type) => allResources.filter(r => r.resourceType === type);\n  const conditions = getByType('Condition');\n  const medications = getByType('MedicationRequest');\n  let observations = getByType('Observation');\n  const reports = getByType('DiagnosticReport');\n\n  reports.forEach(r => {\n    if (r.result) {\n      r.observations = r.result.map(res => observations.find(o => isMatchingReference(o, res.reference, 'Observation')));\n      observations = observations.filter(o => !r.observations.includes(o));\n    }\n    \n  });\n\n  const careplans = getByType('CarePlan');\n  let goals = getByType('Goal');\n  // note that the syntheticmass server doesn't currently return goals in Patient$everything\n\n  careplans.forEach(cp => {\n    if (cp.goal) {\n      cp.goals = cp.goal.map(cpg => goals.find(g => isMatchingReference(g, cpg.reference, 'Goal'))).filter(g => g);\n    }\n  });\n\n  const procedures = getByType('Procedure');\n  const encounters = getByType('Encounter');\n  const allergies = getByType('AllergyIntolerance');\n  const immunizations = getByType('Immunization');\n  const documents = getByType('DocumentReference');\n\n  return (\n      <div>\n        <PatientVisualizer patient={patient} />\n        <ConditionsVisualizer rows={conditions} />\n        <MedicationsVisualizer rows={medications} />\n        <ObservationsVisualizer rows={observations} />\n        <ReportsVisualizer rows={reports} />\n        <CarePlansVisualizer rows={careplans} />\n        <ProceduresVisualizer rows={procedures} />\n        <EncountersVisualizer rows={encounters} />\n        <AllergiesVisualizer rows={allergies} />\n        <ImmunizationsVisualizer rows={immunizations} />\n        <DocumentReferencesVisualizer rows={documents} />\n      </div>\n    );\n};\n\nexport default PatientViewer;","import React, { useState, useEffect } from 'react';\nimport { Link, useParams } from \"react-router-dom\";\n\nimport { getPatientsByCity } from '../syntheticmass_api';\n\n\nconst PatientList = (props) => {\n  const { city } = useParams();  \n  const [patients, setPatients] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    setPatients([]);\n    setIsLoading(true);\n    getPatientsByCity(city)\n      .then(searchResultBundle => {\n        setPatients(searchResultBundle.entry.map(e => e.resource));\n        setIsLoading(false);\n      });\n  }, [city])\n\n  const renderPatients = (patients) => {\n    return patients.map(p => (\n        <React.Fragment key={p.id}>\n        <dt><Link to={`/city/${city}/patient/${p.id}`}>{ p.name[0].family + ', ' + p.name[0].given.join(' ') } </Link></dt>\n        <dd></dd>\n        </React.Fragment>\n      ) );\n  }\n\n  return (\n    <div>\n    <h3> { city } </h3>\n    { isLoading ? \n      <img src=\"https://i.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.webp\" alt=\"loading...\" /> \n      :\n      <dl> { renderPatients(patients) } </dl> }\n     </div> );\n}\n\nexport default PatientList;","import React from 'react';\nimport './App.css';\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\n\nimport StateMap from './components/StateMap';\nimport PatientViewer from './components/PatientViewer';\nimport PatientList from './components/PatientList';\n\nexport default class App extends React.Component {\n\n  render() {\n    return (\n      <HashRouter>\n        <Switch>\n          <Route path={[\"/record_viewer\", \"/patient_viewer\"]}>\n            <PatientViewer />\n          </Route>\n          <Route path=\"/\">\n            <StateMap />\n            <Route path=\"/city/:city\">\n              <PatientList />\n              <Route path=\"/city/:city/patient/:id\">\n                <PatientViewer />\n              </Route>\n            </Route>\n          </Route>\n        </Switch>\n      </HashRouter>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}